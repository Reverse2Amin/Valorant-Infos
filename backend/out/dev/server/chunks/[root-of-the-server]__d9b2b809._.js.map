{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/salem/Documents/IMS/IMS%20Module/Modul%20295/Projekt/Valorant-Infos/Valorant-Infos/backend/src/lib/valorant.ts"],"sourcesContent":["// ------------------------------------------------------------\r\n// TYPES\r\n// ------------------------------------------------------------\r\n\r\nexport type Json = Record<string, unknown>;\r\n\r\nexport interface Agent {\r\n  id: string;\r\n  name: string;\r\n  role: string | null;\r\n  icon: string | null;\r\n  portrait: string | null;\r\n  raw: Json;\r\n}\r\n\r\nexport interface MapItem {\r\n  id: string;\r\n  name: string;\r\n  splash: string | null;\r\n  raw: Json;\r\n}\r\n\r\nexport interface Weapon {\r\n  id: string;\r\n  name: string;\r\n  category: string | null;\r\n  icon: string | null;\r\n  raw: Json;\r\n}\r\n\r\n// ------------------------------------------------------------\r\n// API HELPER\r\n// ------------------------------------------------------------\r\n\r\nasync function getApi(endpoint: string): Promise<Json[]> {\r\n  const url = `https://valorant-api.com/v1/${endpoint}`;\r\n  const res = await fetch(url);\r\n\r\n  if (!res.ok) return [];\r\n\r\n  const json = (await res.json()) as { data?: unknown };\r\n\r\n  return Array.isArray(json.data) ? (json.data as Json[]) : [];\r\n}\r\n\r\n// ------------------------------------------------------------\r\n// GENERIC HELPERS\r\n// ------------------------------------------------------------\r\n\r\nconst id = (o: Json): string =>\r\n  (typeof o.uuid === \"string\" && o.uuid) ||\r\n  (typeof o.id === \"string\" && o.id) ||\r\n  \"\";\r\n\r\nconst name = (o: Json): string =>\r\n  (typeof o.displayName === \"string\" && o.displayName) ||\r\n  (typeof o.name === \"string\" && o.name) ||\r\n  \"\";\r\n\r\nconst icon = (o: Json, ...keys: string[]): string | null => {\r\n  for (const k of keys) {\r\n    const v = o[k];\r\n    if (typeof v === \"string\") return v;\r\n  }\r\n  return null;\r\n};\r\n\r\n// ------------------------------------------------------------\r\n// CATEGORY HELPER (fix f√ºr rot markierung)\r\n// ------------------------------------------------------------\r\n\r\nfunction safeCategory(w: Json): string | null {\r\n  // 1. w.shopData.category\r\n  if (\r\n    w.shopData &&\r\n    typeof w.shopData === \"object\" &&\r\n    typeof (w.shopData as Json).category === \"string\"\r\n  ) {\r\n    return (w.shopData as Json).category as string;\r\n  }\r\n\r\n  // 2. w.category\r\n  if (typeof w.category === \"string\") return w.category;\r\n\r\n  return null;\r\n}\r\n\r\n// ------------------------------------------------------------\r\n// FETCHERS\r\n// ------------------------------------------------------------\r\n\r\nexport async function fetchAgents(): Promise<Agent[]> {\r\n  const data = await getApi(\"agents?isPlayableCharacter=true\");\r\n\r\n  return data.map((a): Agent => ({\r\n    id: id(a),\r\n    name: name(a),\r\n    role:\r\n      typeof a.role === \"string\"\r\n        ? a.role\r\n        : typeof a.role === \"object\" && a.role !== null\r\n          ? ((a.role as Json).displayName as string) ?? null\r\n          : null,\r\n    icon: icon(a, \"displayIcon\", \"displayIconSmall\"),\r\n    portrait:\r\n      (typeof a.fullPortraitV2 === \"string\" && a.fullPortraitV2) ||\r\n      (typeof a.fullPortrait === \"string\" && a.fullPortrait) ||\r\n      null,\r\n    raw: a\r\n  }));\r\n}\r\n\r\nexport async function fetchMaps(): Promise<MapItem[]> {\r\n  const data = await getApi(\"maps\");\r\n\r\n  return data.map((m): MapItem => ({\r\n    id: id(m),\r\n    name: name(m),\r\n    splash: typeof m.splash === \"string\" ? m.splash : null,\r\n    raw: m\r\n  }));\r\n}\r\n\r\nexport async function fetchWeapons(): Promise<Weapon[]> {\r\n  const data = await getApi(\"weapons\");\r\n\r\n  return data.map((w): Weapon => ({\r\n    id: id(w),\r\n    name: name(w),\r\n    category: safeCategory(w),\r\n    icon: icon(w, \"displayIcon\"),\r\n    raw: w\r\n  }));\r\n}\r\n"],"names":[],"mappings":"AAAA,+DAA+D;AAC/D,QAAQ;AACR,+DAA+D;;;;;;;;;AA4B/D,+DAA+D;AAC/D,aAAa;AACb,+DAA+D;AAE/D,eAAe,OAAO,QAAgB;IACpC,MAAM,MAAM,CAAC,4BAA4B,EAAE,UAAU;IACrD,MAAM,MAAM,MAAM,MAAM;IAExB,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO,EAAE;IAEtB,MAAM,OAAQ,MAAM,IAAI,IAAI;IAE5B,OAAO,MAAM,OAAO,CAAC,KAAK,IAAI,IAAK,KAAK,IAAI,GAAc,EAAE;AAC9D;AAEA,+DAA+D;AAC/D,kBAAkB;AAClB,+DAA+D;AAE/D,MAAM,KAAK,CAAC,IACV,AAAC,OAAO,EAAE,IAAI,KAAK,YAAY,EAAE,IAAI,IACpC,OAAO,EAAE,EAAE,KAAK,YAAY,EAAE,EAAE,IACjC;AAEF,MAAM,OAAO,CAAC,IACZ,AAAC,OAAO,EAAE,WAAW,KAAK,YAAY,EAAE,WAAW,IAClD,OAAO,EAAE,IAAI,KAAK,YAAY,EAAE,IAAI,IACrC;AAEF,MAAM,OAAO,CAAC,GAAS,GAAG;IACxB,KAAK,MAAM,KAAK,KAAM;QACpB,MAAM,IAAI,CAAC,CAAC,EAAE;QACd,IAAI,OAAO,MAAM,UAAU,OAAO;IACpC;IACA,OAAO;AACT;AAEA,+DAA+D;AAC/D,2CAA2C;AAC3C,+DAA+D;AAE/D,SAAS,aAAa,CAAO;IAC3B,yBAAyB;IACzB,IACE,EAAE,QAAQ,IACV,OAAO,EAAE,QAAQ,KAAK,YACtB,OAAO,AAAC,EAAE,QAAQ,CAAU,QAAQ,KAAK,UACzC;QACA,OAAO,AAAC,EAAE,QAAQ,CAAU,QAAQ;IACtC;IAEA,gBAAgB;IAChB,IAAI,OAAO,EAAE,QAAQ,KAAK,UAAU,OAAO,EAAE,QAAQ;IAErD,OAAO;AACT;AAMO,eAAe;IACpB,MAAM,OAAO,MAAM,OAAO;IAE1B,OAAO,KAAK,GAAG,CAAC,CAAC,IAAa,CAAC;YAC7B,IAAI,GAAG;YACP,MAAM,KAAK;YACX,MACE,OAAO,EAAE,IAAI,KAAK,WACd,EAAE,IAAI,GACN,OAAO,EAAE,IAAI,KAAK,YAAY,EAAE,IAAI,KAAK,OACvC,AAAC,AAAC,EAAE,IAAI,CAAU,WAAW,IAAe,OAC5C;YACR,MAAM,KAAK,GAAG,eAAe;YAC7B,UACE,AAAC,OAAO,EAAE,cAAc,KAAK,YAAY,EAAE,cAAc,IACxD,OAAO,EAAE,YAAY,KAAK,YAAY,EAAE,YAAY,IACrD;YACF,KAAK;QACP,CAAC;AACH;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,OAAO;IAE1B,OAAO,KAAK,GAAG,CAAC,CAAC,IAAe,CAAC;YAC/B,IAAI,GAAG;YACP,MAAM,KAAK;YACX,QAAQ,OAAO,EAAE,MAAM,KAAK,WAAW,EAAE,MAAM,GAAG;YAClD,KAAK;QACP,CAAC;AACH;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM,OAAO;IAE1B,OAAO,KAAK,GAAG,CAAC,CAAC,IAAc,CAAC;YAC9B,IAAI,GAAG;YACP,MAAM,KAAK;YACX,UAAU,aAAa;YACvB,MAAM,KAAK,GAAG;YACd,KAAK;QACP,CAAC;AACH","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/salem/Documents/IMS/IMS%20Module/Modul%20295/Projekt/Valorant-Infos/Valorant-Infos/backend/src/app/api/valorant/all/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { fetchAgents, fetchMaps, fetchWeapons} from \"@/lib/valorant\";\r\n\r\nexport async function GET() {\r\n  const [agents, maps, weapons] = await Promise.all([\r\n    fetchAgents(),\r\n    fetchMaps(),\r\n    fetchWeapons(),\r\n    \r\n  ]);\r\n\r\n  return NextResponse.json({\r\n    agents,\r\n    maps,\r\n    weapons\r\n  });\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,CAAC,QAAQ,MAAM,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;QAChD,IAAA,wPAAW;QACX,IAAA,sPAAS;QACT,IAAA,yPAAY;KAEb;IAED,OAAO,iQAAY,CAAC,IAAI,CAAC;QACvB;QACA;QACA;IACF;AACF","debugId":null}}]
}